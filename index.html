<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>码流回放</title>
  <link rel="stylesheet" type="text/css" href="jquery-easyui-1.4.4/themes/default/easyui.css">
  <link rel="stylesheet" type="text/css" href="jquery-easyui-1.4.4/themes/icon.css">
  <script type="text/javascript" src="jquery-easyui-1.4.4/jquery.min.js"></script>
  <script type="text/javascript" src="jquery-easyui-1.4.4/jquery.easyui.min.js"></script>
  <script type="text/javascript" src="json.js"></script>
</head>

<body>
  <div class="easyui-layout" fit="true">
    <!-- <div data-options="region:'north',iconCls:'icon-tip'" style="height:70px;">填一些筛选条件之类的</div> -->
    <div data-options="region:'west',split:true,iconCls:'icon-tip'" title="基本信息" style="width:250px;">
      <table id="edit" class="easyui-propertygrid" data-options="
                showGroup:true,
                scrollbarSize:0,
                fit:true
            ">
      </table>
    </div>
    <div data-options="region:'center'">
      <div class="easyui-layout" fit="true">
        <div data-options="region:'center',title:'图',split:true,iconCls:'icon-tip'">
          <div class="easyui-tabs" fit="true">
            <div title="图形" style="padding:10px">
              <p style="font-size:14px">jQuery EasyUI framework helps you build your web pages easily.</p>
              <ul>
                <li>easyui is a collection of user-interface plugin based on jQuery.</li>
                <li>easyui provides essential functionality for building modem, interactive, javascript applications.</li>
                <li>using easyui you don't need to write many javascript code, you usually defines user-interface by writing some HTML markup.</li>
                <li>complete framework for HTML5 web page.</li>
                <li>easyui save your time and scales while developing your products.</li>
                <li>easyui is very easy but powerful.</li>
              </ul>
            </div>
            <div title="表格" style="padding:10px">
            </div>
          </div>


        </div>
        <div data-options="region:'south',split:true,iconCls:'icon-tip'" title="二进制信息" style="height:300px;">
          <div class="easyui-tabs" fit="true">
            <div title="流程图" style="padding:10px">
            <div class="easyui-layout" fit="true">
                <div data-options="region:'west',split:true,iconCls:'icon-tip'" style="width:50%;">
                    <ul id="frameTree" class="easyui-tree" data-options="animate:true,lines:true"></ul>
                </div>
                <div data-options="region:'center'">
                </div>
            </div>
            </div>
            <div title="统计图" style="padding:10px">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <script>
    $(function() {

    var rows = [{
        name: "会话类型",
        value: "SIGNAL"
    },{
        name: "接口类型",
        value: "S1(S6a|S6d)"
    },{
        name: "手机号",
        value: "13800138000"
    },{
        name: "终端型号",
        value: "未知"
    },{
        name: "用户IP地址",
        value: "192.168.2.2"
    },{
        name: "TAC-ECI",
        value: "17153-73880836"
    },{
        name: "eNodeB IP",
        value: "100.86.31.203"
    },{
        name: "MME IP",
        value: "100.86.31.203"
    },{
        name: "Server IP",
        value: "100.86.31.203"
    },{
        name: "数据流向",
        value: "100.86.31.203"
    },{
        name: "承载协议",
        value: "-"
    },{
        name: "业务类型",
        value: "-"
    },{
        name: "承载协议",
        value: "-"
    },{
        name: "漫游类型",
        value: "-"
    },{
        name: "业务状态",
        value: "成功"
    },{
        name: "状态码",
        value: "917"
    },{
        name: "状态码描述",
        value: "UE reply Complete to NE."
    }];


      $('#edit').propertygrid({

        width: 298,
        height: 'auto',
        showGroup: false,
        scrollbarSize: 0,
        columns: [
          [{
            field: 'name',
            title: '名称',
            width: 70,
            resizable: true
          }, {
            field: 'value',
            title: '值',
            // width: 100,
            resizable: false
          }]
        ]
      });
      $('#edit').propertygrid('loadData', rows);

      showFlowTree(data, 0);
  });


  function showFlowTree(data, index) {
      var treeData = [];
      var protos = data.packets[index].protos;

      var getChildren = function(index, proto) {
          var children = [], fields = proto.fields;
          if (!fields) {
              return children;
          }
          for (var i in fields) {
              var field = fields[i];
              var d = {id: index+ '_' + i, text: field.showName}
              children.push(d);
              d.children = getChildren(i, field);
          }
          return children;
      };
      for (var i in protos) {
          var proto = protos[i];
          var d = {id: i, text: proto.showName};
          treeData.push(d);
          d.children = getChildren(i, proto);
      }

      console.log(treeData);
      $('#frameTree').tree({data: treeData});
  }
  </script>
</body>

</html>
